# üéì Quiz App Frontend

> React-based frontend cho Mini Adaptive Learning - Giao di·ªán l√†m b√†i ki·ªÉm tra, luy·ªán t·∫≠p k·ªπ nƒÉng y·∫øu v√† ph√¢n t√≠ch k·∫øt qu·∫£

## üìã Gi·ªõi thi·ªáu

Module **quiz-app** l√† giao di·ªán ch√≠nh c·ªßa h·ªá th·ªëng h·ªçc t·∫≠p th√≠ch ·ª©ng, ƒë·∫£m nh·∫≠n:

- üéØ **Adaptive Quiz**: L√†m b√†i ki·ªÉm tra th√≠ch ·ª©ng theo tr√¨nh ƒë·ªô
- üí™ **Skill Practice**: Luy·ªán t·∫≠p k·ªπ nƒÉng y·∫øu ƒë∆∞·ª£c AI recommend
- üîê **JWT Authentication**: ƒêƒÉng nh·∫≠p b·∫£o m·∫≠t v·ªõi JWT tokens
- üìä **Result Analysis**: Ph√¢n t√≠ch chi ti·∫øt k·∫øt qu·∫£ v√† ƒëi·ªÉm y·∫øu
- üé® **Modern UI**: Ant Design components v·ªõi Vietnamese locale
- üì± **Responsive**: T∆∞∆°ng th√≠ch mobile v√† desktop
- üñºÔ∏è **Rich Media**: H·ªó tr·ª£ c√¢u h·ªèi v√† ƒë√°p √°n c√≥ h√¨nh ·∫£nh

## üõ†Ô∏è Tech Stack

```javascript
// Core
react: ^18.2.0              // UI framework
react-dom: ^18.2.0          // DOM rendering
react-router-dom: ^6.8.0    // Client-side routing

// UI Library
antd: ^5.12.0               // Ant Design components
                            // Vietnamese locale built-in

// HTTP Client
axios: ^1.6.0               // API calls v·ªõi interceptors

// Build Tool
react-scripts: 5.0.1        // Create React App scripts

// Testing
@testing-library/react: ^13.3.0
@testing-library/jest-dom: ^5.16.4
@testing-library/user-event: ^13.5.0
```

## ÔøΩ C√†i ƒë·∫∑t

### Prerequisites

```bash
# Node.js version
node --version  # Should be >= 16.x

# npm version
npm --version   # Should be >= 8.x
```

### Install Dependencies

```bash
# From project root
cd frontend/quiz-app

# Install packages
npm install

# Or with yarn
yarn install
```

## ‚öôÔ∏è C·∫•u h√¨nh

### Environment Variables

File `public/env.js` (runtime configuration):

```javascript
window.env = {
    PORT: 3001,
    API_URL: 'http://localhost:8001',  // Quiz API backend
    SAINT_API_URL: 'http://localhost:8000'  // SAINT Analysis (optional)
};
```

### package.json Configuration

```json
{
  "proxy": "http://localhost:8001",
  "homepage": "http://localhost:3001",
  "scripts": {
    "start": "set PORT=3001 && react-scripts start",
    "dev": "set PORT=3001 && react-scripts start",
    "build": "react-scripts build"
  }
}
```

### Backend Integration

- **Quiz API**: `http://localhost:8001` (required)
- **SAINT Analysis**: `http://localhost:8000` (optional)
- **Authentication**: JWT-based v·ªõi localStorage
- **Proxy**: Tr√°nh CORS issues trong development
- **Image Service**: SeaweedFS cho c√¢u h·ªèi c√≥ h√¨nh

## üìÅ C·∫•u tr√∫c Module

```
frontend/quiz-app/
‚îú‚îÄ‚îÄ public/                      # üåê Static files
‚îÇ   ‚îú‚îÄ‚îÄ env.js                   # Runtime environment config
‚îÇ   ‚îî‚îÄ‚îÄ index.html               # HTML template
‚îÇ
‚îú‚îÄ‚îÄ src/                         # üì¶ Source code
‚îÇ   ‚îú‚îÄ‚îÄ App.js                   # Main application v·ªõi routing
‚îÇ   ‚îú‚îÄ‚îÄ App.css                  # Global styles
‚îÇ   ‚îú‚îÄ‚îÄ index.js                 # React entry point
‚îÇ   ‚îú‚îÄ‚îÄ index.css                # Base CSS
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ auth/                    # üîê Authentication
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AuthContext.js       # JWT token management
‚îÇ   ‚îÇ                            # Login/logout logic
‚îÇ   ‚îÇ                            # User state management
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ contexts/                # üéØ React Contexts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ToastContext.js      # Toast notification system
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ components/              # üß© UI Components
‚îÇ       ‚îú‚îÄ‚îÄ HomePage.js          # Landing page (dashboard)
‚îÇ       ‚îú‚îÄ‚îÄ Login.js             # Login form
‚îÇ       ‚îú‚îÄ‚îÄ AvatarMenu.js        # User menu dropdown
‚îÇ       ‚îÇ
‚îÇ       ‚îú‚îÄ‚îÄ QuizSetup.js         # Quiz configuration
‚îÇ       ‚îú‚îÄ‚îÄ QuizTaking.js        # Quiz interface
‚îÇ       ‚îú‚îÄ‚îÄ QuizResult.js        # Quiz results & analysis
‚îÇ       ‚îÇ
‚îÇ       ‚îú‚îÄ‚îÄ StudentWeakSkills.js # Weak skills dashboard
‚îÇ       ‚îú‚îÄ‚îÄ PracticeSetup.js     # Practice configuration
‚îÇ       ‚îú‚îÄ‚îÄ PracticeTaking.js    # Practice interface
‚îÇ       ‚îú‚îÄ‚îÄ PracticeResult.js    # Practice results
‚îÇ       ‚îÇ
‚îÇ       ‚îú‚îÄ‚îÄ Toast.js             # Toast notification component
‚îÇ       ‚îú‚îÄ‚îÄ Toast.css            # Toast styles
‚îÇ       ‚îú‚îÄ‚îÄ ToastContainer.js    # Toast container
‚îÇ       ‚îú‚îÄ‚îÄ BackToTop.js         # Scroll to top button
‚îÇ       ‚îî‚îÄ‚îÄ BackToTop.css        # BackToTop styles
‚îÇ
‚îú‚îÄ‚îÄ build/                       # üèóÔ∏è Production build (generated)
‚îú‚îÄ‚îÄ node_modules/                # üìö Dependencies (generated)
‚îú‚îÄ‚îÄ package.json                 # NPM configuration
‚îú‚îÄ‚îÄ package-lock.json            # Dependency lock file
‚îî‚îÄ‚îÄ README.md                    # üìñ This file
```

## üöÄ Ch·∫°y ·ª®ng D·ª•ng

### Development Mode

```bash
# Start development server
npm start
# Or
npm run dev

# App runs at http://localhost:3001
# Auto-reload on file changes
# Opens browser automatically
```

### Production Build

```bash
# Create optimized build
npm run build

# Build output in build/ folder
# Ready for deployment
```

### Test

```bash
# Run test suite
npm test

# Run with coverage
npm test -- --coverage
```

### Scripts Available

```json
{
  "start": "set PORT=3001 && react-scripts start",  // Dev server
  "dev": "set PORT=3001 && react-scripts start",     // Alias for start
  "build": "react-scripts build",                     // Production build
  "test": "react-scripts test",                       // Run tests
  "eject": "react-scripts eject"                      // Eject CRA (irreversible)
}
```

## üîå API Integration

### Axios Configuration

```javascript
// Axios instance v·ªõi interceptors
import axios from 'axios';

const api = axios.create({
  baseURL: window.env?.API_URL || 'http://localhost:8001'
});

// Request interceptor - Add JWT token
api.interceptors.request.use(config => {
  const token = localStorage.getItem('token');
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

// Response interceptor - Handle errors
api.interceptors.response.use(
  response => response,
  error => {
    if (error.response?.status === 401) {
      // Redirect to login
      window.location.href = '/login';
    }
    return Promise.reject(error);
  }
);
```

### Endpoints ƒê∆∞·ª£c S·ª≠ D·ª•ng

#### Authentication üîê
```javascript
POST /auth/login              // Login v·ªõi email/username + password
POST /auth/logout             // Logout (client-side token removal)
GET /api/users/name           // Get user info (with JWT)
```

#### Quiz Management üìù
```javascript
POST /quiz/generate           // Generate quiz (grade, subject, num_questions)
POST /quiz/submit             // Submit answers & get results
GET /quiz/weak-skills/{email} // Get student's weak skills
```

#### Practice Management üí™
```javascript
POST /agent/questions/generate // Generate AI-powered practice questions
POST /practice/submit          // Submit practice & update profile
```

#### SAINT Integration üìä
```javascript
POST /quiz/submit-saint-data  // Send logs to SAINT analysis (optional)
```

## üß© Components & Routes

### Route Structure

```javascript
// Public routes
/login                         // Login page

// Protected routes (require JWT)
/                              // HomePage - Dashboard
/quiz-setup                    // Quiz configuration
/quiz/:quizId                  // Quiz taking interface
/result/:quizId                // Quiz results & analysis
/student-weak-skills           // Weak skills dashboard
/practice/setup                // Practice configuration
/practice/taking               // Practice interface
/practice/result               // Practice results
```

### Core Components

#### 1. **HomePage** (`/`)
- Dashboard v·ªõi options:
  - üìù L√†m b√†i ki·ªÉm tra ƒë·ªãnh k·ª≥
  - üí™ Luy·ªán t·∫≠p k·ªπ nƒÉng y·∫øu
  - üìä Xem ph√¢n t√≠ch k·∫øt qu·∫£
- Navigation hub cho to√†n b·ªô app

#### 2. **Login** (`/login`)
- JWT authentication form
- Email/username + password
- Remember token in localStorage
- Auto redirect sau khi login

#### 3. **QuizSetup** (`/quiz-setup`)
- Configuration form:
  - Grade selection (default: L·ªõp 1)
  - Subject selection (default: To√°n)
  - Number of questions
- Call `POST /quiz/generate`
- Redirect to QuizTaking

#### 4. **QuizTaking** (`/quiz/:quizId`)
- **Features**:
  - Question display v·ªõi images
  - Multiple choice answers
  - Question navigation (prev/next)
  - Timer countdown
  - Progress indicator
  - Mark for review
  - Submit confirmation
- **State management**:
  - Answers tracking
  - Time tracking
  - Current question index
- **API calls**:
  - `POST /quiz/submit`
  - Optional: `POST /quiz/submit-saint-data`

#### 5. **QuizResult** (`/result/:quizId`)
- **Display**:
  - Overall score & percentage
  - Correct/incorrect breakdown
  - Detailed question-by-question results
  - Explanations for each answer
  - Images for questions/answers
- **Actions**:
  - Retry quiz
  - View weak skills
  - Go to practice

#### 6. **StudentWeakSkills** (`/student-weak-skills`)
- **Features**:
  - List weak skills from profile
  - Skill details (accuracy, avg time, status)
  - Filter by status (struggling, in_progress)
  - Sort by accuracy
- **API**: `GET /quiz/weak-skills/{email}`
- **Actions**:
  - Start practice for specific skill
  - View skill analytics

#### 7. **PracticeSetup** (`/practice/setup`)
- Select weak skill to practice
- Configure number of questions
- Call AI Agent for question generation
- Redirect to PracticeTaking

#### 8. **PracticeTaking** (`/practice/taking`)
- Similar to QuizTaking but for practice
- AI-generated questions
- Real-time feedback
- Adaptive difficulty

#### 9. **PracticeResult** (`/practice/result`)
- Practice results & analysis
- Profile update
- Skill mastery progress
- Recommendations for next practice

## üé® UI/UX Features

### Ant Design Components Used

```javascript
// Layout
import { Layout, Card, Row, Col, Divider } from 'antd';

// Navigation
import { Menu, Breadcrumb, Pagination } from 'antd';

// Forms
import { Form, Input, Button, Select, Radio, Checkbox } from 'antd';

// Feedback
import { Modal, message, notification, Spin, Progress } from 'antd';

// Data Display
import { Table, List, Avatar, Badge, Tag, Statistic } from 'antd';

// Icons
import { UserOutlined, LogoutOutlined, CheckCircleOutlined } from '@ant-design/icons';
```

### UI Features

#### üåç Vietnamese Locale
```javascript
import { ConfigProvider } from 'antd';
import viVN from 'antd/locale/vi_VN';

<ConfigProvider locale={viVN}>
  <App />
</ConfigProvider>
```

#### üì± Responsive Design
- Mobile-first approach
- Breakpoints: 576px, 768px, 992px, 1200px
- Grid system v·ªõi Ant Design Row/Col
- Touch-friendly buttons v√† inputs

#### üéØ User Feedback
- **Toast notifications**: Success/error/info/warning
- **Loading states**: Spin components cho async operations
- **Progress indicators**: Quiz progress, skill mastery
- **Confirmations**: Modal cho critical actions (submit, exit)

#### üñºÔ∏è Image Handling
- Lazy loading cho images
- Fallback cho missing images
- SeaweedFS integration v·ªõi @ prefix
- Responsive images

#### üé® Theming
- Custom CSS v·ªõi variables
- Ant Design theme customization
- Consistent color palette
- Modern, clean design

## üß™ Testing & Development

### Run Tests

```bash
# Run test suite
npm test

# Run with coverage
npm test -- --coverage

# Run specific test file
npm test -- Login.test.js
```

### Manual Testing Workflow

#### 1. Login Flow
```bash
# Start app
npm start

# Navigate to http://localhost:3001
# Should redirect to /login

# Login v·ªõi account m·∫´u:
Email/Username: student1@gmail.com ho·∫∑c student1
Password: 123456

# Should redirect to HomePage (/)
```

#### 2. Quiz Flow
```
HomePage ‚Üí Click "L√†m b√†i ki·ªÉm tra"
  ‚Üì
QuizSetup ‚Üí Configure & Click "B·∫Øt ƒë·∫ßu"
  ‚Üì
API: POST /quiz/generate
  ‚Üì
QuizTaking ‚Üí Answer questions ‚Üí Click "N·ªôp b√†i"
  ‚Üì
API: POST /quiz/submit
  ‚Üì
QuizResult ‚Üí View results & analysis
```

#### 3. Practice Flow
```
HomePage ‚Üí Click "Luy·ªán t·∫≠p k·ªπ nƒÉng y·∫øu"
  ‚Üì
StudentWeakSkills ‚Üí Select skill ‚Üí Click "Luy·ªán t·∫≠p"
  ‚Üì
PracticeSetup ‚Üí Configure ‚Üí Click "B·∫Øt ƒë·∫ßu"
  ‚Üì
API: POST /agent/questions/generate
  ‚Üì
PracticeTaking ‚Üí Answer ‚Üí Click "N·ªôp b√†i"
  ‚Üì
API: POST /practice/submit
  ‚Üì
PracticeResult ‚Üí View results & profile update
```

### Test Accounts

```javascript
// Student account
{
  email: "student1@gmail.com",
  username: "student1",
  password: "123456",
  role: "student"
}

// Add more in MongoDB users collection
```

### Browser DevTools

```javascript
// Check localStorage
localStorage.getItem('token')
localStorage.getItem('user')

// Check API calls
// Network tab ‚Üí Filter: XHR/Fetch

// Check React components
// React DevTools extension
```

## üîÑ Application Workflow

### Complete User Journey

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    User Opens App                        ‚îÇ
‚îÇ                 http://localhost:3001                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
                     ‚Üì
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
              ‚îÇ Has Token?  ‚îÇ
              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ                        ‚îÇ
        No                       Yes
         ‚îÇ                        ‚îÇ
         ‚Üì                        ‚Üì
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ Login  ‚îÇ              ‚îÇ HomePage ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                       ‚îÇ
         ‚îÇ POST /auth/login      ‚îÇ
         ‚Üì                       ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ
    ‚îÇ Save Token ‚îÇ               ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îÇ
         ‚îÇ                       ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
                     ‚Üì
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ Choose Activity:      ‚îÇ
         ‚îÇ 1. Quiz               ‚îÇ
         ‚îÇ 2. Practice           ‚îÇ
         ‚îÇ 3. View Weak Skills   ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ                        ‚îÇ
     Quiz Path              Practice Path
         ‚îÇ                        ‚îÇ
         ‚Üì                        ‚Üì
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇQuizSetup ‚îÇ          ‚îÇWeakSkills    ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                       ‚îÇ
         ‚îÇ POST /quiz/generate   ‚îÇ Select Skill
         ‚Üì                       ‚Üì
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇQuizTaking‚îÇ          ‚îÇPracticeSetup ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                       ‚îÇ
         ‚îÇ POST /quiz/submit     ‚îÇ POST /agent/questions/generate
         ‚Üì                       ‚Üì
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇQuizResult‚îÇ          ‚îÇPracticeTaking ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                       ‚îÇ
         ‚îÇ                       ‚îÇ POST /practice/submit
         ‚îÇ                       ‚Üì
         ‚îÇ               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ               ‚îÇPracticeResult  ‚îÇ
         ‚îÇ               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                        ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚îÇ
                      ‚Üì
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
              ‚îÇ Back to Home  ‚îÇ
              ‚îÇ or Logout     ‚îÇ
              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### State Management Flow

```javascript
// AuthContext manages:
- token (JWT)
- user (user info)
- login()
- logout()

// Local state per component:
- QuizTaking: questions, answers, currentQuestion, timeRemaining
- PracticeTaking: questions, answers, currentQuestion
- StudentWeakSkills: weakSkills, loading, filters

// API response handling:
try {
  const response = await axios.post('/quiz/submit', data);
  // Success: navigate to results
  navigate(`/result/${quizId}`);
} catch (error) {
  // Error: show toast notification
  showError('C√≥ l·ªói x·∫£y ra');
}
```

## üîó K·∫øt n·ªëi Module Kh√°c

### Backend Dependencies

```javascript
// Quiz API (backend/quiz_api)
http://localhost:8001
- Authentication endpoints
- Quiz generation & submission
- User profile & weak skills
- Practice management

// SAINT Analysis (backend/saint_analysis) [Optional]
http://localhost:8000
- Knowledge tracing
- Learning analytics
- Skill mastery prediction
```

### Integration Points

1. **Authentication Flow**
   - Frontend: Login form ‚Üí `POST /auth/login`
   - Backend: Validate credentials ‚Üí Return JWT
   - Frontend: Store token ‚Üí Add to all requests

2. **Quiz Flow**
   - Frontend: Quiz setup ‚Üí `POST /quiz/generate`
   - Backend: Query MongoDB ‚Üí Return questions
   - Frontend: Display ‚Üí User answers ‚Üí `POST /quiz/submit`
   - Backend: Grade ‚Üí Return results

3. **Practice Flow**
   - Frontend: Select skill ‚Üí `POST /agent/questions/generate`
   - Backend: AI Agent ‚Üí RAG + LLM ‚Üí Generate questions
   - Frontend: Display ‚Üí User answers ‚Üí `POST /practice/submit`
   - Backend: Update profile ‚Üí Return results

## üêõ Troubleshooting

### 1. App Won't Start

**Error**: `Port 3001 already in use`

```bash
# Windows - Find process
netstat -ano | findstr :3001

# Kill process
taskkill /PID <PID> /F

# Or use different port
set PORT=3002 && npm start
```

### 2. API Connection Failed

**Error**: `Network Error` or `ERR_CONNECTION_REFUSED`

```bash
# Check backend is running
curl http://localhost:8001/

# Check proxy in package.json
"proxy": "http://localhost:8001"

# Check window.env.API_URL in public/env.js
window.env = {
  API_URL: 'http://localhost:8001'
}
```

### 3. CORS Errors

**Error**: `Access-Control-Allow-Origin` in browser console

```python
# Backend (quiz_api/main.py) should have:
app.add_middleware(
    CORSMiddleware,
    allow_origins=[
        "http://localhost:3000",
        "http://localhost:3001",
    ],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

### 4. Login Fails / 401 Unauthorized

**Issue**: Cannot login or token invalid

```bash
# Check user exists in MongoDB
python -c "
from pymongo import MongoClient
client = MongoClient('mongodb://localhost:27017')
db = client['mini_adaptive_learning']
user = db.users.find_one({'email': 'student1@gmail.com'})
print(user)
"

# Check JWT_SECRET_KEY matches between frontend storage and backend
# Clear localStorage and login again
localStorage.clear()
```

### 5. Images Not Loading

**Issue**: `image_question` or `image_answer` not displaying

```javascript
// Images should have @ prefix from backend
// Example: @http://125.212.229.11:8888/path/image.png

// Check SeaweedFS is running
curl http://125.212.229.11:8888

// In component, handle missing images:
<img 
  src={imageUrl} 
  alt="Question"
  onError={(e) => { e.target.style.display = 'none' }}
/>
```

### 6. Build Errors

**Error**: Module not found or compilation failed

```bash
# Clear cache and reinstall
Remove-Item -Recurse -Force node_modules, package-lock.json
npm install

# Clear React Scripts cache
Remove-Item -Recurse -Force node_modules/.cache
npm start
```

### 7. Quiz Not Generating

**Issue**: Empty quiz or error on generate

```bash
# Check backend logs
# Backend should have questions in MongoDB

# Check frontend request
console.log('Generating quiz:', { grade, subject, num_questions });

# Fallback to JSON file if MongoDB empty
# Backend handles this automatically
```

### 8. Toast Notifications Not Showing

**Issue**: No feedback after actions

```javascript
// Check ToastContext is wrapped properly
<ToastProvider>
  <App />
</ToastProvider>

// Use in component
const { showSuccess, showError } = useToast();
showSuccess('Message here');
```

### 9. Private Routes Not Working

**Issue**: Can access protected routes without login

```javascript
// Check PrivateRoute logic in App.js
const PrivateRoute = ({ children }) => {
  const { token } = useAuth();
  if (!token) {
    return <Navigate to="/login" replace />;
  }
  return children;
};

// Wrap routes:
<Route path="/" element={<PrivateRoute><HomePage /></PrivateRoute>} />
```

### 10. React DevTools Not Working

```bash
# Install React DevTools extension
# Chrome: https://chrome.google.com/webstore/detail/react-developer-tools/
# Firefox: https://addons.mozilla.org/en-US/firefox/addon/react-devtools/

# Check console for React warnings
# Use Profiler to debug performance
```

## üöÄ Deployment

### Development

```bash
npm run dev
# App runs at http://localhost:3001
```

### Production Build

```bash
# Create optimized build
npm run build

# Test build locally
npx serve -s build -l 3001

# Deploy build/ folder to:
# - Netlify
# - Vercel
# - AWS S3 + CloudFront
# - Nginx/Apache server
```

### Environment Variables for Production

```javascript
// production.env.js
window.env = {
  API_URL: 'https://api.yourdomain.com',
  SAINT_API_URL: 'https://saint.yourdomain.com'
};
```

---

## üìö T√†i li·ªáu tham kh·∫£o

- [React Documentation](https://react.dev/)
- [Ant Design Components](https://ant.design/components/overview/)
- [React Router v6](https://reactrouter.com/en/main)
- [Axios Documentation](https://axios-http.com/docs/intro)
- [Quiz API README](../../backend/quiz_api/README.md)
- [Agent Module README](../../agent/README.md)

---

**Maintainer**: Mini Adaptive Learning Team  
**Last Updated**: October 17, 2025
